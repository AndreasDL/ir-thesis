\chapter{Introduction}

%\begin{chapquote}{R.W. Picard, J. Klein\cite{CompRecognizeEmotion}}
%Bad feelings do not necessarily cause bad things to happen: mild irritations that simmer and create distress %or frustration, then boil into anger, can serve as impetus to find a better way.
%\end{chapquote}

\section{The role of emotions}
Emotions play a major role in non-verbal communication, are quite complex and essential to understand human behavior. Literature claims that the ability to recognize emotions will improve the ability of computers to understand human interaction\cite{CompRecognizeEmotion}. The need for computer applications to detect the emotional state is ever growing. 

\npar

But how does one define emotion ? In psychology a clear distinction is made between physiological behavior and the conscious experience of an emotion, called expression\cite{ExtendedPaper}. The expression consists of many parts, including the facial expression, body language and voice concern. Unlike expression, the physiological aspect of an emotion, e.g. heart rate, skin conductance, pupil dilation, is much harder to control. To really know one's emotions, it seems, one has to research the physiological aspect of the emotion. One possibility for this is analysis of brain waves via Electroencephalography\cite{EEGDatasets}.

\section{Brain activity measurement}

\subsection{Electroencephalography}
Different technologies exist to analyse the brain, the most convenient method is via Electroencephalography (EEG)\nomenclature{EEG}{Electroencephalography}, since it is a non-invasive method. Non-invasive methods, in contrast to invasive methods require no surgery; they simply measure electrical activity of the brain using electrodes placed on the scalp. This data is then recorded as an EEG from which noise and artifacts have to be removed. The result is used to train a classifier. 

\npar

Signals originating from the cortex, close to the skull, are most visible. Signals originating deeper in the brain cannot be observed directly. Even for signals originating from the cortex, EEG is far from precise as the bone between the the cortex and electrodes distorts the signal. Still EEG data can provide significant insight into electrical activity of the cortex.

\npar

As opposed to electroencephalography, magnetoencephalography (MEG)\nomenclature{MEG}{magnetoencephalography} measures the brain using magnetic fields instead of electrical fields. Since MEG is more prone to noise from external magnetic signals, i.e. the earth's magnetic field, shielding is required.

\subsection{Origin of the signals}

The electrical activity in a brain is caused when an incoming signal arrives in a neuron. This triggers some sodium ions to move inside the cell, which in turn, causes a voltage rise\cite{ExtendedPaper}. When this increase in voltage reaches a threshold, an action potential is triggered in the form of a wave of electrical discharge that travels to neighboring neurons. It is this activity that is measured by the surface electrodes.

\subsection{Electrode positioning}
To ensure that experiments are replicable, standards for locations of electrodes have been developed. One of these systems is the 10/20 system, an internationally recognized methods to describe location of scalp electrodes\cite{TenTwentyManual}. The numbers 10 and 20 refer to the distances between the electrodes, which are either 10\% or 20\% of the total front-back or left-right distance of the skull.

\subsubsection{Positions}
Each site is identified with a letter that determines the lobe and hemisphere location.
\begin{itemize}
\item \textbf{F:} Frontal
\item \textbf{T:} Temporal
\item \textbf{C:} Central
\item \textbf{P:} Parietal
\item \textbf{O:} Occipital
\end{itemize}
Note that no central lobe exists, the C letter is only used for identification purposes. The letter z indicates that the electrode is placed on the central line. Even numbers are use for the right hemisphere, while odd numbers are used for the left hemisphere. A picture of the 10/20 system is added below for clarification.

\mijnfiguur{width=0.9\textwidth}{1020ElectrodePlacementSystem}{The electrode placement system\cite{1020Site}.}

\subsubsection{Monopoles and dipoles}
Two different types of EEG channels exist, monopolar and dipolar. A monopolar channel records the potential difference of a signal, compared to a neutral electrode, usually connected to an ear lobe of mastoid. A bipolar channel is obtained by subtracting two monopolar EEG signals, which improves SNR by removing shared artifacts\cite{MonoBiPolar}. 

\subsection{Event related potentials}

An Event related potential (ERP)\nomenclature{ERP}{Event Related Potential}, is a measured brain response to an event, measured by EEG or MEG. The ERP nomenclature usually starts with a letter that indicates the polarity: the P corresponds to a positive polarity, while the N indicates a negative polarity. The number indicates the mean latency, which might may variate significantly between subjects. The most important one is the P300 wave, which is usually elicited using the oddball paradigm; when a low probability target item occurs between high probability items. It consists of two components, the P3a with a latency of 240ms and the P3b with a latency of 350 ms\cite{P300TwoParts}. The later component, P3b only occurs when the subject actively counted either the targeted or more frequent stimuli.

\mijnfiguur{width=0.5\textwidth}{waves}{The Different ERP linked to an oddball paradigm.}


\section{Emotion and EEG data}

\subsection{Arousal - valence (- dominance) classification}
Before emotions can be recognized, a classification model is needed. A common model to classify emotions is the bipolar arousal-valence model\cite{ExtendedPaper}\cite{RealTimeEEGEmotion}, that places emotions in a two dimensional space. The main advantage of using a multidimensional model, is that all discrete emotions are modeled in its space, even when no particular label can be used to define the current feeling. Figure \ref{ArousalValenceModel} shows the mapping of different emotions for this model. Adding a third dimension, dominance, that indicate how strong the emotion is perceived is also possible\cite{EEGDatasets}. Note that this dimension is less important for the emotion classification.
\begin{enumerate}
\item \textbf{Valence:} whether or not the emotion is perceived as positive or negative.
\item \textbf{Arousal:} measures how excited or calm a person is.
\item \textbf{Dominance:} how strong the emotion is perceived.
\end{enumerate}

\mijnfiguur{width=0.45\textwidth}{ArousalValenceModel}{The arousal - valence model maps emotions in a two dimensional plane.}

\subsection{Determining arousal}
Usually, brain waves are split into different bands, based on their frequency\cite{EmotionRelativePower}\cite{WavesSite}.
\begin{enumerate}
\item \textbf{Alpha:} 8-13Hz, indicate that the brain is relaxed and/or inactive.
\item \textbf{Beta:} 13-30HZ, point to a more active and focused brain.
\item \textbf{Gamma:} 30-50Hz, relate to simultaneous processing of information from different brain areas.
\item \textbf{Delta:} 0-4hz, these waves are generated during dreamless sleep and meditation.
\item \textbf{theta:} 4-8Hz, occur during dreaming
\end{enumerate}
For the emotion recognition, only alpha and beta bands are considered. The alpha bands corresponds with a relaxed state and are often connected to brain inactivity\cite{ExtendedPaper}\cite{RealTimeEEGEmotion}. Beta waves on the other hand are an indication that the brain is a more active state, which corresponds to a higher level of arousal. These two parameters are often combined into the beta/alpha ratio.

\npar

Since most muscle and eye artifacts are within the range of 1.2Hz and $>$30hz respectively and power line cause artifacts around the 50Hz range, using only alpha and beta waves will already remove a lot of noise and artifact from the signal\cite{ExtendedPaper}.

\subsection{Determining valence}
The right hemisphere is generally speaking, more active during negative emotion than the left hemisphere which is in turn more active during positive emotions\cite{RealTimeEEGEmotion}\cite{EEGDatasets}. Note that individual difference might affect the location\cite{ExtendedPaper}.

\npar

Since high alpha rates correspond with an inactive brain and high beta waves with an active brain, one should look for an increase in beta activity and a decrease in alpha activity at one side. The other hemisphere should show an increase in alpha waves and a decrease of beta waves as indication that is becomes less active. Another possibility is to use the gamma band instead of the alpha band. 

\subsection{Classifaction procedures}
!!TODO!

Fractal dimension %=> hichigu
Higher order crossing
Principal component analysis
sliding window
fishers
etc


\subsection{Datasets}
The center for the study of emotion and attention (CSEA)\nomenclature{CSEA}{Center for the Study of Emotion and Attention}, by the university of Florida made several datasets available:
\begin{itemize}
\item \textbf{IAPS:} International Affective Picture System\nomenclature{IAPS}{International Affective Picture System}\\
This dataset consists of a large set op emotional stimuli in the form of color photographs.
\item \textbf{IADS:} International Affective Digital Sounds \nomenclature{IADS}{International Affective Digital Sounds}\\
This dataset consists of acoustic emotional stimuli designed for investigation and research of emotion and attention.
\item \textbf{ANEW:} Affective Norms for English Words\nomenclature{ANEW}{Affective Norms for English Words}\\
This dataset provides a set of emotional ratings for a large number of english words.
\item \textbf{ANET:} Affective Norms for English Text\nomenclature{ANET}{Affective Norms for English Text}\\
This set provides normative ratings of emotion for a large set of brief texts.
\item \textbf{SAM:} Self-Assessment Manikin\nomenclature{SAM}{Self-Assessment Manikin}\\
A non-verbal pictorial assessment technique that measures the pleasure, arousal and dominance associated with a person's affective reaction to a wide variety of stimuli.
\end{itemize}
All datasets are available for non-profit research at a degree-granting institution\cite{DataSets}. For this thesis, the first two datasets seem most important as they are used in many experiments regarding emotion detection\cite{ExtendedPaper}\cite{EmotionSite}\cite{RealTimeEEGEmotion}\cite{EEGDatasets}.

\section{The P300 speller}
\subsection{The P300 speller explained}
The P300 speller uses a six by six grid of characters, each row and column is flashed in a random order while the subject silently counts the number of flashes of a certain character, as shown in figure \ref{P300Scheme}. This procedure, where a train of stimuli with some infrequent occurring target stimuli is applied, is called the oddball paradigm. The technique triggers an increase in potential difference in the EEG around the parietal lobe. This Event Related Potential (ERP) occurs +- 300 milliseconds after the stimuli is flashed and is called the P300 waveform\cite{ComparisonClassifications}. The presence or absence of the P300 waveform is used by the P300 speller to determine what character the subject was focusing on, which allows the subject to spell text. 

\mijnfiguur{width=0.9\textwidth}{P300Scheme}{Different parts of the P300 speller, found at \cite{P300Scheme}.}

\subsection{Related research}
To improve the spelling time many improvements and research has been done. Language models were developed that predicted the word achieved great speedups\cite{LangModel}, classifiers were compared and tested on both healthy\cite{ClassTechniqueComp} and unhealthy subjects\cite{ComparisonClassifications}. Since many unhealthy subjects might have an impaired vision or eye movement, tactile\cite{TactileP300} and auditory\cite{AuditoryP300} spellers have been developed. Additional information like error potentials has been used to detect spelling errors\cite{ErrorPotentials}. 

\npar

To improve accuracy common problems like, adjacency distraction and double flashes were avoided using new randomized paradigms\cite{PaperThibault}. Adjacency distraction occurs when a subject is distracted by a flash from a neighboring row or column. Double flash errors occur when the target row and column are flashed close after each other, which causes the P300 wave to have a lower amplitude. Both problems deform the P300 wave, making it harder to detect. Other paradigms like the T9 interface P300 speller have also been developed\cite{P300T9}.

\npar

All the problems above are more technology related, other more subject related factors also influence the P300 ERP wave. A recent study showed that amount of sleep a subject had the night before a test run, had significant influence on the P300 ERP wave. Subjects who had less than 8 hours of sleep elicited a larger P300 amplitude\cite{HowManyPeople}. The same research also compares row - column flashes with single character flashes. Contrary to what one would expect, the single character system didn't yield higher P300 amplitudes, since subjects were tired by the long waiting times. 

\subsection{The need for an emotionally aware P300 speller}

There are several ways emotion recognition can improve not only the accuracy but also the perception of the P300 speller. Detecting what the subject feels, can help him communicate more humane. It also provides more information that can be used for ethical issues, e.g. "what does the subject think of the P300 speller analyzing his brain activity?".

\subsubsection{Influence of emotion on the P300 ERP}

Research with visual stimulus on healthy subjects, show that emotion has an effect on the auditory P300 wave\cite{AuditoryP300Effect}. Both the P300 peak amplitude and area was highest when viewing neutral pictures and descended further, in decreasing order, for sadness, anger and pleasure. The amplitudes were significantly lower at both Fz and C3 positions than Pz and Oz. The latency of the P300 ERP speller was shortest or neutrality and in increasing order longer for pleasure, anger and sadness. Interestingly, the P300 amplitudes were significantly larger for woman than for men. Additionally women showed lower amplitudes for for pleasure than neutrality or sadness while man showed smaller amplitudes for pleasure then either neutral or sadness. 

\npar

%todo tweede paper
The fact that 



\subsubsection{How does the subject feel about the usage of the P300 speller?}
%emotion is not the only reason => how does the subject feel about the P300 speller?


